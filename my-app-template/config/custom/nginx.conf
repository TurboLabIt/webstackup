## üö® WARNING üö®
#
# This file is under version control!
# DO NOT EDIT DIRECTLY - If you do, you'll loose your changes!
#
# The original file is in `/var/www/my-app/config/custom/`
#
# You MUST:
#
# 1. edit the original file on you PC
# 2. Git-commit+push the changes
# 3. run `sudo bash /var/www/my-app/scripts/deploy.sh`
#
# ‚ö†Ô∏è This file is SHARED among dev|staging|prod ‚ö†Ô∏è
#
# ü™Ñ Based on https://github.com/TurboLabIt/webstackup/blob/master/my-app-template/config/custom/nginx.conf

set $PROJECT_DIR /var/www/my-app;
root $PROJECT_DIR/public;

## WordPress location (activate for WordPress websites)
#include /usr/local/turbolab.it/webstackup/config/nginx/15_wordpress_location.conf;
#include /usr/local/turbolab.it/webstackup/config/nginx/16_wordpress_restrict_api.conf;
  
## Maintenace - To activate:
# touch /usr/share/nginx/html/wsa-maintenance
include /usr/local/turbolab.it/webstackup/config/nginx/06_maintenace.conf;
  
## Symfony location (activate for Symfony websites)
#include /usr/local/turbolab.it/webstackup/config/nginx/07_symfony_location.conf;
  
## Enable HTTPS
include /usr/local/turbolab.it/webstackup/config/nginx/20_https_enable.conf;

## Lowercase URLs
include /usr/local/turbolab.it/webstackup/config/nginx/35_lowercase.conf;
  
## PHP-FPM
include /usr/local/turbolab.it/webstackup/config/nginx/40_php-fpm.conf;
  
## Frontend compression and caching
include /usr/local/turbolab.it/webstackup/config/nginx/50_compression.conf;
include /usr/local/turbolab.it/webstackup/config/nginx/60_caching.conf;
  
## Extra security
include /usr/local/turbolab.it/webstackup/config/nginx/70_security.conf;
  
## Exclude from logging favicon.ico, robots.txt etc.
include /usr/local/turbolab.it/webstackup/config/nginx/80_no-log.conf;
error_log /var/log/nginx/my-app_error.log;
access_log /var/log/nginx/my-app_access.log;
  
## Rate-limiting
include /usr/local/turbolab.it/webstackup/config/nginx/90_rate-limit.conf;
  
## Clean the root
include /usr/local/turbolab.it/webstackup/config/nginx/95_clean_root.conf;

