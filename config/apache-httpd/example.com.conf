# Apache HTTP Server example.com config by TurboLab.it
#
# See: https://turbolab.it/1379

<VirtualHost *:443>

  ServerName example.com
  DocumentRoot /var/www/example.com
  <Directory ${PROJECT_DIR}/public>
    AllowOverride None
    Options FollowSymLinks
    Require all granted
  </Directory>

  SSLCertificateFile /usr/local/turbolab.it/webstackup/autogenerated/https-localhost.crt
  SSLCertificateKeyFile /usr/local/turbolab.it/webstackup/autogenerated/openssl-private-key.pem
 
</VirtualHost>


## redirect www.example.com to example.com
<VirtualHost *:443>

  ServerName www.example.com
  
  SSLCertificateFile /usr/local/turbolab.it/webstackup/autogenerated/https-localhost.crt
  SSLCertificateKeyFile /usr/local/turbolab.it/webstackup/autogenerated/openssl-private-key.pem

  RewriteEngine On
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [NC,R=301,QSA,L]
  
</VirtualHost>
