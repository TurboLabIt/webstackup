## FreshRSS nginx config example by WEBSTACKUP
#
# Based on https://freshrss.github.io/FreshRSS/en/admins/10_ServerConfig.html#nginx-configuration

server {

  server_name rss.example.com;

  ## ğŸ” HTTPS certificate
  include /usr/local/turbolab.it/webstackup/config/nginx/20_https_enable.conf;
  ssl_certificate /usr/local/turbolab.it/webstackup/autogenerated/https-localhost.crt;
  ssl_certificate_key /usr/local/turbolab.it/webstackup/autogenerated/openssl-private-key.pem;
  
  ## ğŸ•µï¸ Prevent crawling
  add_header X-Robots-Tag "noindex, nofollow, noarchive, nosnippet, noimageindex, notranslate";

  ## ğŸŒ public webroot ("htdocs")
  root /var/www/freshrss/p;

  index index.php index.html index.htm;

  location ~ ^.+?\.php(/.*)?$ {

    fastcgi_pass unix:/var/run/php/php-fpm.sock;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    # By default, the variable PATH_INFO is not set under PHP-FPM
    # But FreshRSS APIs greader.php and misc.php need it. If you have a â€œBad Requestâ€ error, double check this var!
    # NOTE: the separate $path_info variable is required. For more details, see:
    # https://trac.nginx.org/nginx/ticket/321
    set $path_info $fastcgi_path_info;
    fastcgi_param PATH_INFO $path_info;
    include fastcgi_params;
      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
  }

  location / {
    try_files $uri $uri/ index.php;
  }

  ## ğŸ“ƒ Logging
  error_log /var/log/nginx/freshrss_error.log;
  access_log /var/log/nginx/freshrss_access.log;
}
