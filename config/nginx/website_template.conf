### WEBSITE TEMPLATE BY WEBSTACK.UP
# Your new website can start with this template.
# Edit away to make it yours!
#
# For your convenience, do a "replace all" of these:
#
# localhost -> mydomain.com (no-www)
# /usr/share/nginx/html -> /var/www/...


# redirect www.localhost to localhost
server {
	
	server_name www.localhost;
	include /usr/local/turbolab.it/webstackup/config/nginx/20_https_enable.conf;
	
	## Bogus HTTPS Certificate
	ssl_certificate /usr/local/turbolab.it/webstackup/autogenerated/ssl_certificate.crt;
	ssl_certificate_key /usr/local/turbolab.it/webstackup/autogenerated/ssl_certificate_key.key;
	
	
	## After you have obtained a valid Let's Encrypt certificate,
	# remove the bogus one above and enable this
	# 
	# Reminder: the command template is inside the file :-)
	#include /usr/local/turbolab.it/webstackup/config/nginx/25_https_letsencrypt.conf;
	
	return 301 https://localhost$request_uri;
}


## real server
server {

	server_name localhost;
	root /usr/share/nginx/html;
	
	
	## WordPress location (activate for WordPress websites)
	#include /usr/local/turbolab.it/webstackup/config/nginx/15_wordpress_location.conf;
	
	
	## Enable HTTPS
	include /usr/local/turbolab.it/webstackup/config/nginx/20_https_enable.conf;
	
	
	## Bogus HTTPS Certificate
	ssl_certificate /usr/local/turbolab.it/webstackup/autogenerated/ssl_certificate.crt;
	ssl_certificate_key /usr/local/turbolab.it/webstackup/autogenerated/ssl_certificate_key.key;
	
	
	## After you have obtained a valid Let's Encrypt certificate,
	# remove the bogus one above and enable this
	# 
	# Reminder: the command template is inside the file :-)
	#include /usr/local/turbolab.it/webstackup/config/nginx/25_https_letsencrypt.conf;
	
	
	## If you need HTTPAUTH, enable this
	#include /usr/local/turbolab.it/webstackup/config/nginx/30_httpauth.conf;
	
	
	## PHP-FPM
	include /usr/local/turbolab.it/webstackup/config/nginx/40_php-fpm.conf;
	
	
	## Frontend compression and caching
	include /usr/local/turbolab.it/webstackup/config/nginx/50_compression.conf;
	include /usr/local/turbolab.it/webstackup/config/nginx/60_caching.conf;
	
	
	## Extra security
	include /usr/local/turbolab.it/webstackup/config/nginx/70_security.conf;
}
