;; Sensible default config for PHP by WEBSTACKUP
; https://github.com/TurboLabIt/webstackup
;
;; ðŸš¨ WARNING ðŸš¨
;
; This file belongs to Webstackup
; DO NOT EDIT DIRECTLY - If you do, you'll loose your changes!
;
; If you want to disable it, just delete the symlink from
; your PHP config directory `/etc/php/<version>/fpm/conf.d/`.
;
; You can also overwrite single values in your `/var/www/my-app/config/custom/php-custom.ini`.

; max request size (needed for CMS uploads) - sync with `config/nginx/02_global_http_level.conf`
upload_max_filesize = 100M
post_max_size = 100M

; Default for both CLI and FPM. CLI gets `unlimited.ini`
memory_limit = 512M

;;; Securing Session INI Settings
; https://www.php.net/manual/en/session.security.ini.php

; Session ID cannot be passed through URLs
session.use_cookies = On
session.use_only_cookies = On

; This prevents the session module to use an uninitialized session ID.
; Put differently, the session module only accepts valid session IDs generated by the session module.
; It rejects any session ID supplied by users.
session.use_strict_mode = On

; Prevents XSS attacks aimed to steal the session ID
; Refuses access to the session cookie from JavaScript. This setting prevents cookies snatched by a JavaScript injection.
session.cookie_httponly = On

; Allow access to the session ID cookie only when the protocol is HTTPS
session.cookie_secure = On

; This attribute is a way to mitigate CSRF attacks
; Allows servers to assert that a cookie ought not to be sent along with cross-site requests.
; This assertion allows user agents to mitigate the risk of cross-origin information leakage, and 
; provides some protection against cross-site request forgery attacks. 
 session.cookie_samesite = "Strict"
 
 ; 1 year cookies expiration
session.gc_maxlifetime = 31536000

; PHP is capable of transforming links transparently.
; If the run-time option session.use_trans_sid is enabled, relative URIs will be changed to contain the session id automatically.
session.use_trans_sid = Off

; session.sid_bits_per_character allows you to specify the number of bits in encoded session ID character.
; The possible values are '4' (0-9, a-f), '5' (0-9, a-v), and '6' (0-9, a-z, A-Z, "-", ","). 
session.sid_bits_per_character = 5

; https://github.com/php/php-src/issues/12344 + https://symfony.com/blog/cve-2024-50340-ability-to-change-environment-from-query
register_argc_argv = off
